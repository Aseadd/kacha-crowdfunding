(self.webpackChunkkacha_crowdfuning=self.webpackChunkkacha_crowdfuning||[]).push([[676],{8676:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var n=a(9439),d=a(2027),i=a(7313),o=a(8630),r=a.n(o),u=a(3709),c=a(8467),l=a(7747),s=function(e){return e.JENGA="JENGA",e.MASTERCARD="MASTERCARD",e.VISA="VISA",e}({}),m=a(5458),p=a(6417);function h(){var e,t,a,o,h,v,f,y,x=(0,u.v9)(m.Hz).user,j=(0,i.useState)({loading:!0}),k=(0,n.Z)(j,2),A=k[0],C=k[1],w=(0,i.useRef)(),E=(0,c.TH)().state,g=(0,l.nw)().showError;return(0,i.useEffect)((function(){E?C({loading:!1,data:E}):g({message:"Checkout is not found"})}),[]),(0,i.useEffect)((function(){var e,t;if(A.data)if([s.JENGA,s.VISA].includes(null===(e=A.data)||void 0===e?void 0:e.pay_via))try{var a;null===(a=w.current)||void 0===a||a.submit()}catch(u){var n=document.createElement("button");n.style.display="none",w.current.appendChild(n),n.click(),w.current.removeChild(n)}else if(s.MASTERCARD===(null===(t=A.data)||void 0===t?void 0:t.pay_via)){var d=A.data.session_id,i=A.data.merchantID,o=A.data.reference_number;window.errorCallback=function(e){alert("Error: "+JSON.stringify(e))},window.cancelCallback=function(){alert("Payment cancelled")},window.completeCallback=function(){alert("Payment success"),alert("thank you for buying")},r()("https://test-gateway.mastercard.com/checkout/version/61/checkout.js",(function(e){if(e);else{var t,a=window.Checkout;a.configure({session:{id:d},merchant:i,order:{description:"test description",id:o},interaction:{merchant:{name:"".concat(null===x||void 0===x?void 0:x.firstname," ").concat(null===x||void 0===x?void 0:x.lastname),address:{line1:null!==(t=null===x||void 0===x?void 0:x.address)&&void 0!==t?t:"Addis Ababa",line2:"Ethiopia"}}}}),a.showPaymentPage()}}))}}),[A.data]),(0,p.jsxs)("div",{className:"w-full min-h-screen px-3 py-3 flex flex-col justify-center items-center",children:[(0,p.jsx)("div",{className:"w-full flex min-h-screen justify-center items-center p-10 mx-auto",children:(0,p.jsx)(d.Z,{tip:"",size:"large"})}),A.data&&(0,p.jsx)("div",{className:"w-full",children:(null===(e=A.data)||void 0===e?void 0:e.pay_via)===s.JENGA?(0,p.jsxs)("form",{ref:w,action:"https://v3-uat.jengapgw.io/processPayment",method:"POST",children:[(0,p.jsx)("input",{type:"hidden",id:"token",name:"token",value:A.data.token}),(0,p.jsx)("input",{type:"hidden",id:"merchantCode",name:"merchantCode",value:A.data.merchantCode}),(0,p.jsx)("input",{type:"hidden",id:"currency",name:"currency",value:null!==(t=A.data.currency)&&void 0!==t?t:"USD"}),(0,p.jsx)("input",{type:"hidden",id:"orderAmount",name:"orderAmount",value:A.data.orderAmount}),(0,p.jsx)("input",{type:"hidden",id:"orderReference",name:"orderReference",value:A.data.orderReference}),(0,p.jsx)("input",{type:"hidden",id:"productType",name:"productType",value:A.data.productType}),(0,p.jsx)("input",{type:"hidden",id:"productDescription",name:"productDescription",value:A.data.productDescription}),(0,p.jsx)("input",{type:"hidden",id:" paymentTimeLimit name= paymentTimeLimit ",value:A.data[" paymentTimeLimit"]}),(0,p.jsx)("input",{type:"hidden",id:"customerFirstName",name:"customerFirstName",value:null!==(a=A.data.customerFirstName)&&void 0!==a?a:null===x||void 0===x?void 0:x.firstname}),(0,p.jsx)("input",{type:"hidden",id:"customerLastName",name:"customerLastName",value:null!==(o=A.data.customerLastName)&&void 0!==o?o:null===x||void 0===x?void 0:x.lastname}),(0,p.jsx)("input",{type:"hidden",id:"customerPostalCodeZip",name:"customerPostalCodeZip",value:A.data.customerPostalCodeZip}),(0,p.jsx)("input",{type:"hidden",id:"customerAddress",name:"customerAddress",value:null!==(h=A.data.customerAddress)&&void 0!==h?h:null===x||void 0===x?void 0:x.address}),(0,p.jsx)("input",{type:"hidden",id:"customerEmail",name:"customerEmail",value:null!==(v=A.data.customerEmail)&&void 0!==v?v:null===x||void 0===x?void 0:x.email}),(0,p.jsx)("input",{type:"hidden",id:"customerPhone",name:"customerPhone",value:null!==(f=A.data.customerPhone)&&void 0!==f?f:null===x||void 0===x?void 0:x.phone}),(0,p.jsx)("input",{type:"hidden",id:"extraData",name:"extraData",value:A.data.extraData}),(0,p.jsx)("input",{type:"hidden",id:"callbackUrl",name:"callbackUrl",value:A.data.callbackUrl}),(0,p.jsx)("input",{type:"hidden",id:"countryCode",name:"countryCode",value:null!==(y=A.data.countryCode)&&void 0!==y?y:"ET"}),(0,p.jsx)("input",{type:"hidden",id:"signature",name:"signature",value:A.data.merchantCode+A.data.orderReference+A.data.currency+"".concat(A.data.orderAmount)+A.data.callbackUrl})]}):A.data.pay_via===s.VISA?(0,p.jsx)("form",{action:A.data.form_url,method:"POST",ref:w,children:Object.keys(A.data).map((function(e,t){return["pay_via","type","token","merchantCode","callbackUrl","orderAmount","orderReference","form_url"].includes(e)?null:(0,p.jsx)("input",{type:"hidden",id:e,name:e,value:A.data[e]},t)}))}):null})]})}},8630:function(e){function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function a(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,n,d){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");"function"===typeof n&&(d=n,n={}),n=n||{},d=d||function(){},o.type=n.type||"text/javascript",o.charset=n.charset||"utf8",o.async=!("async"in n)||!!n.async,o.src=e,n.attrs&&function(e,t){for(var a in t)e.setAttribute(a,t[a])}(o,n.attrs),n.text&&(o.text=""+n.text),("onload"in o?t:a)(o,d),o.onload||t(o,d),i.appendChild(o)}}}]);